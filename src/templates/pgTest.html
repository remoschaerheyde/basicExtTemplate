<div class="hy-directive-container" ng-mouseup="vm.resizeEnd($event)">
    <div class="hy-header-container">
        <div class="hy-table-container hy-table-container--header" ng-style="{'width': vm.headerWidth + 'px'}">
            <table class="hy-table">
                <thead class="hy-header">
                    <tr>
                        <th class="hy-header-item" ng-repeat="col in vm._tblCols track by $index" >
                            <div class="hy-header-item__container" ng-style="{'width': col.colWidth + 'px'}" >
                                <div class="hy-header-item__content-container hy-header-item__content-container--title" >
                                    <span class="hy-header-item__text">{{col.headerTitle}}</span>
                                </div>
                                <div class="hy-header-item__content-container hy-header-item__content-container--resize-box" ng-mousedown="vm.resizeStart($event, $index)"></div>
                            </div>
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="hy-table-container hy-table-container--body">
    <table class="hy-table">
        <tbody>
            <tr ng-repeat="row in vm._matrixData track by $index" ng-init="outerRowIndex = $index">
                <td class="hy-cell" ng-repeat="cell in row track by $index" ng-style="{'width': vm._tblCols[$index].colWidth + 'px'}" >
                    <!-- display row and measures -->
                    <div class="hy-cell__container" ng-if="$index !== vm.commentColIndex" >
                        <span class="hy-cell__text">{{cell.qText}}</span>
                    </div>
                    
                    <!--================= display comments ==================================================== -->
                    <div class="hy-cell__container" ng-if="$index === vm.commentColIndex">
                        <div class="hy-comment__view--small" ng-class="{'commentEditMode': vm.commentEditMode}" ng-hide="vm.showEditForCell === outerRowIndex" ng-click="cell.qText !== '' || vm.commentEditMode === true ? vm.showEditForCell = outerRowIndex:  vm.showEditForCell =-1 ; vm.textAreaComment = cell.qText;">
                            <span class="hy-cell__text"> {{cell.qText}}</span>
                            <span class="hy-comment__h-empty-div">.</span> 
                    </div>

                        <!-- display comments large -->
                    <div class="hy-comment__view--large-preview lui-dialog" ng-show="vm.showEditForCell === outerRowIndex">
                        <div class="hy-comment__close-btn-container" ng-if="!vm.commentEditMode">
                            <span class="lui-icon lui-icon--close" ng-click="vm.showEditForCell = -1" aria-hidden="true"></span>
                        </div>
                        <div class="lui-dialog__header hy-comment__edit-header" ng-if="vm.commentEditMode">
                                <div class="lui-dialog__title">
                                <span>Edit Comment</span>
                                <span class="hy-comment__close-btn--edit lui-icon lui-icon--close" ng-click="vm.showEditForCell = -1" aria-hidden="true"></span>
                            </div>
                        </div>
                        <div class="hy-comment__edit-body lui-dialog__body" ng-class="{'hy-comment-previewBorder': !vm.commentEditMode}">
                            <textarea class="hy-comment__textarea lui-textarea" ng-readonly="!vm.commentEditMode" ng-model="vm.textAreaComment" spellcheck="false"></textarea>
                        </div>
                        <div class="lui-dialog__footer hy-comment__edit-footer" ng-if="vm.commentEditMode">
                            <button class="lui-button lui-dialog__button" ng-click="vm.deleteComment(row); vm.showEditForCell = -1" ng-hide="cell.qText.length === 0">Delete comment</button>
                            <button class="lui-button lui-dialog__button" ng-click="vm.addOrUpdateComment(row, outerRowIndex); vm.showEditForCell = -1">
                                <span ng-show="cell.qText.length === 0">Create new comment</span>
                                <span ng-hide="cell.qText.length === 0">Update comment</span>
                            </button>
                        </div>
                    </div>
                    </div>
                </td>
            </tr>
        </tbody>
     </table>
     </div>
 </div>        